{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from \"@angular/forms\";\nlet AdminConnectionComponent = class AdminConnectionComponent {\n  constructor(fb, authService, router) {\n    this.fb = fb;\n    this.authService = authService;\n    this.router = router;\n    this.mode = 0;\n  }\n  ngOnInit() {\n    this.loginFormGroup = this.fb.group({\n      email: [\"\", Validators.required],\n      password: [\"\", Validators.required]\n    });\n  }\n  onInputClick() {\n    this.mode = 0;\n  }\n  login() {\n    this.submitted = true;\n    if (this.loginFormGroup?.invalid) return;else {\n      this.authService.login(this.loginFormGroup.value.email, this.loginFormGroup.value.password).subscribe(resp => {\n        let jwtToken = resp.headers.get(\"Authorization\");\n        // console.log(jwtToken)\n        this.authService.saveToken(jwtToken);\n        if (this.authService.estAdmin() || this.authService.estGestionnairePortefeuille()) this.router.navigateByUrl(\"/accueil\");else if (this.authService.estChefDeProjet())\n          // this.router.navigateByUrl(\"/projets/sonProjet\")//*** à modifier\n          this.router.navigateByUrl(\"/mes-projets-geres\");else\n          // this.router.navigateByUrl(\"/projets/sonProjet\")//*** à modifier\n          this.router.navigateByUrl(\"/mes-projets-affectes\");\n      }, error => {\n        this.mode = 1;\n      });\n    }\n  }\n};\nAdminConnectionComponent = __decorate([Component({\n  selector: 'app-admin-connection',\n  templateUrl: './admin-connection.component.html',\n  styleUrls: ['./admin-connection.component.css']\n})], AdminConnectionComponent);\nexport { AdminConnectionComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAgCC,UAAU,QAAO,gBAAgB;AAQ1D,IAAMC,wBAAwB,GAA9B,MAAMA,wBAAwB;EAEnCC,YAAoBC,EAAc,EAASC,WAAc,EAC9CC,MAAa;IADJ,OAAE,GAAFF,EAAE;IAAqB,gBAAW,GAAXC,WAAW;IAC3C,WAAM,GAANC,MAAM;IAFjB,SAAI,GAAQ,CAAC;EAEe;EAG5BC,QAAQ;IACN,IAAI,CAACC,cAAc,GAAC,IAAI,CAACJ,EAAE,CAACK,KAAK,CAAC;MAChCC,KAAK,EAAE,CAAC,EAAE,EAACT,UAAU,CAACU,QAAQ,CAAC;MAC/BC,QAAQ,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACU,QAAQ;KACnC,CAAC;EAEJ;EACAE,YAAY;IACV,IAAI,CAACC,IAAI,GAAC,CAAC;EACb;EACAC,KAAK;IACH,IAAI,CAACC,SAAS,GAAC,IAAI;IACnB,IAAG,IAAI,CAACR,cAAc,EAAES,OAAO,EAAE,OAAO,KACpC;MACF,IAAI,CAACZ,WAAW,CAACU,KAAK,CAAC,IAAI,CAACP,cAAc,CAACU,KAAK,CAACR,KAAK,EAAC,IAAI,CAACF,cAAc,CAACU,KAAK,CAACN,QAAQ,CAAC,CAACO,SAAS,CAClGC,IAAI,IAAE;QACJ,IAAIC,QAAQ,GAACD,IAAI,CAACE,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;QAC9C;QACA,IAAI,CAAClB,WAAW,CAACmB,SAAS,CAACH,QAAQ,CAAC;QACpC,IAAG,IAAI,CAAChB,WAAW,CAACoB,QAAQ,EAAE,IAAE,IAAI,CAACpB,WAAW,CAACqB,2BAA2B,EAAE,EAC5E,IAAI,CAACpB,MAAM,CAACqB,aAAa,CAAC,UAAU,CAAC,MAClC,IAAG,IAAI,CAACtB,WAAW,CAACuB,eAAe,EAAE;UACxC;UACA,IAAI,CAACtB,MAAM,CAACqB,aAAa,CAAC,oBAAoB,CAAC;UAG/C;UACA,IAAI,CAACrB,MAAM,CAACqB,aAAa,CAAC,uBAAuB,CAAC;MAEtD,CAAC,EACDE,KAAK,IAAG;QACN,IAAI,CAACf,IAAI,GAAC,CAAC;MACb,CAAC,CACF;;EAEL;CACD;AA1CYZ,wBAAwB,eALpCF,SAAS,CAAC;EACT8B,QAAQ,EAAE,sBAAsB;EAChCC,WAAW,EAAE,mCAAmC;EAChDC,SAAS,EAAE,CAAC,kCAAkC;CAC/C,CAAC,GACW9B,wBAAwB,CA0CpC;SA1CYA,wBAAwB","names":["Component","Validators","AdminConnectionComponent","constructor","fb","authService","router","ngOnInit","loginFormGroup","group","email","required","password","onInputClick","mode","login","submitted","invalid","value","subscribe","resp","jwtToken","headers","get","saveToken","estAdmin","estGestionnairePortefeuille","navigateByUrl","estChefDeProjet","error","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Chifae\\IdeaProjects\\GestionGarderieFront\\src\\app\\components\\admin-connection\\admin-connection.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-admin-connection',\n  templateUrl: './admin-connection.component.html',\n  styleUrls: ['./admin-connection.component.css']\n})\nexport class AdminConnectionComponent {\n  mode:number=0;\n  constructor(private fb:FormBuilder,private authService:Au\n    ,private router:Router) { }\n  loginFormGroup!:FormGroup;\n  submitted: boolean | undefined;\n  ngOnInit(): void {\n    this.loginFormGroup=this.fb.group({\n      email: [\"\",Validators.required],\n      password: [\"\", Validators.required]\n    });\n\n  }\n  onInputClick(){\n    this.mode=0;\n  }\n  login() {\n    this.submitted=true;\n    if(this.loginFormGroup?.invalid) return;\n    else{\n      this.authService.login(this.loginFormGroup.value.email,this.loginFormGroup.value.password).subscribe(\n        resp=>{\n          let jwtToken=resp.headers.get(\"Authorization\");\n          // console.log(jwtToken)\n          this.authService.saveToken(jwtToken);\n          if(this.authService.estAdmin()||this.authService.estGestionnairePortefeuille())\n            this.router.navigateByUrl(\"/accueil\")\n          else if(this.authService.estChefDeProjet())\n            // this.router.navigateByUrl(\"/projets/sonProjet\")//*** à modifier\n            this.router.navigateByUrl(\"/mes-projets-geres\")\n\n          else\n            // this.router.navigateByUrl(\"/projets/sonProjet\")//*** à modifier\n            this.router.navigateByUrl(\"/mes-projets-affectes\")\n\n        },\n        error => {\n          this.mode=1;\n        }\n      )\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}